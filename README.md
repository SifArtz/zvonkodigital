# Playlist checker (frontend only)

Полностью статический веб-интерфейс (HTML/CSS/JS) для проверки, попали ли релизы в плейлисты ВКонтакте, Яндекс Музыки, МТС Музыки и Звука. Все данные и токены хранятся в `localStorage` вашего браузера; бэкенда или Python-кода больше не требуется.

## Как запустить

1. Поднимите любой статический сервер в папке `static`:
   - `npx serve static` или `python -m http.server --directory static 8000`
   - либо опубликуйте содержимое `static/` на любом хостинге статических файлов.
2. Откройте `http://localhost:8000/index.html` (или URL вашего хостинга).

## Настройка токена

Площадки требуют OAuth-токенов. На первой карточке страницы есть поля для `access_token`, `refresh_token` и «Срок жизни (сек)». Введите значения (например, полученные через вашу учётную запись) и нажмите «Сохранить токены». Браузер будет пытаться продлевать сессию по `refresh_token` автоматически.

> Если токен нельзя обновить (нет `refresh_token` или истёк), появится подсказка «Токен не задан» — просто вставьте свежие данные и сохраните заново.

## Как работает проверка

- Введите один или несколько UPC через пробел/новые строки и нажмите «Добавить и проверить».
- Скрипт берёт дату начала продаж (`sales_start_date`) релиза, ищет плейлисты на дату `min(дата релиза + 7 дней, сегодня)` и отбрасывает несоответствующие названиям релиза треки.
- Если позиция в чарте отсутствует (`position = null`), карточка помечается как «Плейлист подборка».
- Для релизов, которые ещё не вышли, создаётся запись в локальной очереди. Они будут проверены в день выхода, а затем ещё раз через неделю (если не нашли попаданий). Релизы, которые можно проверить в окне `релиз + 7 дней`, после этой проверки не отслеживаются повторно.
- Все попадания сохраняются в `localStorage` и отображаются на вкладке «Релизы» сгруппированными по неделям (например, «Неделя 24.11 - 30.11»).

## Автоповторы

Пока вкладка открыта, каждые 60 секунд фоновый воркер проверяет релизы из очереди, дата которых наступила. Найденные попадания автоматически появляются в списке.

## Сброс данных

Кнопка «Очистить очередь/результаты» удаляет локально сохранённые UPC, результаты и попадания в плейлисты. Токены очищаются кнопкой «Сбросить» в блоке настроек токена.
